"use strict";(self.webpackChunkcarmi_art=self.webpackChunkcarmi_art||[]).push([[729],{5729:(N,u,r)=>{r.r(u),r.d(u,{ProductsModule:()=>y});var p=r(6814),g=r(5692),s=r(6223),h=r(8619),t=r(5879),n=r(5324),m=r(2371);function f(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"nb-card",12)(1,"nb-card-body")(2,"div",5)(3,"div",13),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15),t._uU(6),t.qZA(),t.TgZ(7,"div",16),t._UZ(8,"nb-checkbox",17),t.qZA()()(),t.TgZ(9,"nb-card-footer")(10,"div",5)(11,"div",7)(12,"input",18),t.NdJ("ngModelChange",function(a){const d=t.CHM(e).$implicit;return t.KtG(d.cost_pen=a)}),t.qZA()(),t.TgZ(13,"div",8)(14,"nb-form-field")(15,"button",19),t._UZ(16,"nb-icon",20),t.qZA(),t._UZ(17,"input",21),t.TgZ(18,"button",22),t._UZ(19,"nb-icon",23),t.qZA()()()()()()}if(2&o){const e=l.$implicit;t.xp6(6),t.hij(" ",e.name," "),t.xp6(6),t.s9C("value",e.cost_pen),t.Q6J("ngModel",e.cost_pen)}}let Z=(()=>{class o{constructor(e,i){this.activeModal=e,this.service=i,this.loading=!1,this.isClose="close",this.carrito=[]}ngOnInit(){}closeModal(){this.activeModal.close(this.isClose)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(n.X4l),t.Y36(m.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["art-m-shopping"]],inputs:{carrito:"carrito"},decls:24,vars:2,consts:[[1,"scrollModal",2,"width","900px",3,"nbSpinner"],[1,"d-flex","align-items-center","justify-content-between"],["icon","shopping-cart-outline","status","success"],["nbButton","","outline","","status","basic","size","tiny",3,"click"],["aria-hidden","true"],[1,"row"],[1,"col-md-7"],[1,"col-md-6"],[1,"col-md-6",2,"text-align","right"],["status","primary"],["style","margin-bottom: 5px;",4,"ngFor","ngForOf"],[1,"col-md-5"],[2,"margin-bottom","5px"],[1,"col-md-2","text-center"],["src","https://www.pngall.com/wp-content/uploads/7/Gallery-PNG-Images.png","alt","","height","60px"],[1,"col-md-9"],[1,"col-md-1","text-center"],["status","priamry"],["type","number","nbInput","","fieldSize","small","fullWidth","","placeholder","Costo",3,"value","ngModel","ngModelChange"],["nbPrefix","","nbButton","","size","small","status","danger"],["icon","minus-outline","pack","eva"],["type","text","nbInput","","fullWidth","","fieldSize","small"],["nbSuffix","","nbButton","","size","small","status","success"],["nbPrefix","","icon","plus-outline","pack","eva"]],template:function(i,a){1&i&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div"),t._UZ(4,"nb-icon",2),t._uU(5,"MI CARRITO "),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return a.closeModal()}),t.TgZ(7,"span",4),t._uU(8,"\xd7"),t.qZA()()()(),t.TgZ(9,"nb-card-body")(10,"div",5)(11,"div",6)(12,"div",5)(13,"div",7)(14,"strong"),t._uU(15,"CESTA"),t.qZA()(),t.TgZ(16,"div",8)(17,"nb-checkbox",9),t._uU(18,"Todos"),t.qZA()()(),t._UZ(19,"hr"),t.YNc(20,f,20,3,"nb-card",10),t.qZA(),t.TgZ(21,"div",11)(22,"strong"),t._uU(23,"RES\xdaMEN"),t.qZA()()()()()),2&i&&(t.Q6J("nbSpinner",a.loading),t.xp6(20),t.Q6J("ngForOf",a.carrito))},dependencies:[p.sg,s.Fj,s.wV,s.JJ,s.On,n.Asz,n.yKW,n.XWE,n.ndF,n.fMN,n.h8i,n.DPz,n.Q7R,n.jBG,n.t3q,n.yyc,n.NTf]})}return o})();var _=r(6896),b=r(3703),P=r(1212);function T(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",17)(16,"button",18),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.addItem(c))}),t._UZ(17,"nb-icon",5),t._uU(18," Agregar"),t.qZA()()()}if(2&o){const e=l.$implicit,i=l.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.code||e.code_original),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(null!==e.cost_pen?t.xi3(11,6,e.cost_pen," "):t.xi3(12,9,e.cost_pen_ref," ")),t.xp6(4),t.Oqu(null==e?null:e.quantity)}}function v(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"nb-card-footer")(1,"div",19)(2,"div",20)(3,"app-pagination-per",21),t.NdJ("changePerPage",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.changePerPage(a))}),t.qZA()(),t.TgZ(4,"div",20)(5,"app-pagination",22),t.NdJ("changePagePagination",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.changePagePaginations(a))}),t.qZA()(),t.TgZ(6,"div",20),t._UZ(7,"app-pagination-detail",23),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("total",e.paginate.total)("perPageDefault",e.paginate.perPage)("currentPerPage",e.paginate.perPage),t.xp6(2),t.Q6J("formControl",e.page)("paginationOptions",e.paginate),t.xp6(2),t.Q6J("paginationDetailOptions",e.paginate)}}const A=[{path:"",component:(()=>{class o{constructor(e,i,a){this.service=e,this.formBuilder=i,this.nbDialogService=a,this.formHeaders=s.cw,this.products=[],this.paginate="",this.carrito=[]}ngOnInit(){this.fieldReactive(),this.getProducts()}fieldReactive(){this.formHeaders=this.formBuilder.group({search:[""],page:[1],per_page:[20]})}get page(){return this.formHeaders.get("page")}changePerPage(e){this.formHeaders.controls.per_page.setValue(e),this.formHeaders.controls.page.setValue(1),this.getProducts()}changePagePaginations(e){this.formHeaders.controls.page.setValue(e),this.getProducts()}filters(){this.formHeaders.controls.page.setValue(1),this.getProducts()}getProducts(){const i=this.formHeaders.value;this.service.nameParams$(h.b.el_art.settings.products+"/input-output",{size:i.per_page,page:i.page,name_code_filter:i.search}).subscribe(c=>{this.products=c.data||[],console.log(this.products),setTimeout(()=>{this.setPaginate(c)},100)})}setPaginate(e){this.paginate={from:e.pageNum,to:e.pageSize,page:e.pageNum,pages:e.pages,perPage:e.pageSize,nextPage:Number(e.pageNum)<Number(e.pages)?Number(e.pageNum)+1:null,previousPage:Number(e.pageNum)>1?Number(e.pages)-1:null,total:e.total,data:e.data}}addItem(e){this.carrito.push(e)}openShopping(){this.nbDialogService.open(Z,{dialogClass:"dialog-limited-height",context:{carrito:this.carrito},closeOnBackdropClick:!1,closeOnEsc:!1}).onClose.subscribe(e=>{"ok"===e&&(this.formHeaders.controls.page.setValue(1),this.getProducts())})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(m.m),t.Y36(s.qu),t.Y36(n.Gln))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["art-products-home"]],decls:41,vars:4,consts:[[1,"row"],[1,"col-md-6"],["icon","save","status","success"],[1,"col-md-6",2,"text-align","right"],["nbButton","","size","medium","status","primary",3,"click"],["icon","shopping-cart-outline"],[2,"padding-top","1px","padding-bottom","1px"],[3,"formGroup"],[1,"col-md-5"],["type","text","nbInput","","fieldSize","small","fullWidth","","formControlName","search","placeholder","Buscar"],[1,"col-md-1"],["nbButton","","fullWidth","","size","small","status","warning",3,"click"],[2,"max-height","70vh"],[1,"teble-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"width","1px"],["nbButton","","size","tiny","fullWidth","","status","success",3,"click"],[1,"row","g-1","row-cols-1","row-cols-lg-3","align-items-center"],[1,"col"],[3,"total","perPageDefault","currentPerPage","changePerPage"],[3,"formControl","paginationOptions","changePagePagination"],[3,"paginationDetailOptions"]],template:function(i,a){1&i&&(t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1),t._UZ(4,"nb-icon",2),t._uU(5," PRODUCTOS "),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return a.openShopping()}),t._UZ(8,"nb-icon",5),t._uU(9),t.qZA()()()(),t.TgZ(10,"nb-card-header",6)(11,"form",7)(12,"div",0),t._UZ(13,"div",1),t.TgZ(14,"div",8),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return a.filters()}),t._uU(18,"Buscar"),t.qZA()()()()(),t.TgZ(19,"nb-card-body",12)(20,"div",13)(21,"table",14)(22,"thead")(23,"tr")(24,"th"),t._uU(25,"#"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"C\xf3digo"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Nombre"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Descripci\xf3n"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Precio"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Cantidad"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"OPC."),t.qZA()()(),t.TgZ(38,"tbody"),t.YNc(39,T,19,12,"tr",15),t.qZA()()()(),t.YNc(40,v,8,6,"nb-card-footer",16),t.qZA()),2&i&&(t.xp6(9),t.Oqu(a.carrito.length),t.xp6(2),t.Q6J("formGroup",a.formHeaders),t.xp6(28),t.Q6J("ngForOf",a.products),t.xp6(1),t.Q6J("ngIf",(null==a.products?null:a.products.length)>0))},dependencies:[_.Q,b.X,P.h,p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.oH,s.sg,s.u,n.Asz,n.yKW,n.XWE,n.ndF,n.fMN,n.h8i,n.DPz,p.H9]})}return o})()}];let C=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(A),g.Bz]})}return o})();var x=r(3053);const U=[p.ez,s.u5,s.UX],q=[n.zyh,n.KdK,n.nKr,n.T2N,n.uuI,n.j7H.forChild(),n.V7y,n.MfT];let y=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[C,x.R,U,q]})}return o})()}}]);