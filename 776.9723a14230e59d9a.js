"use strict";(self.webpackChunkcarmi_art=self.webpackChunkcarmi_art||[]).push([[776],{4776:(Q,m,l)=>{l.r(m),l.d(m,{ProductsModule:()=>S});var u=l(6814),h=l(5692),r=l(6223),T=l(8619),t=l(5879),a=l(5324),f=l(2371);function v(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"nb-card",12)(1,"nb-card-body")(2,"div",5)(3,"div",13),t._UZ(4,"img",14),t.qZA(),t.TgZ(5,"div",15),t._uU(6),t.qZA(),t.TgZ(7,"div",16),t._UZ(8,"nb-checkbox",17),t.qZA()()(),t.TgZ(9,"nb-card-footer")(10,"div",5)(11,"div",7)(12,"input",18),t.NdJ("ngModelChange",function(n){const c=t.CHM(e).$implicit;return t.KtG(c.cost_pen=n)}),t.qZA()(),t.TgZ(13,"div",8)(14,"nb-form-field")(15,"button",19),t._UZ(16,"nb-icon",20),t.qZA(),t._UZ(17,"input",21),t.TgZ(18,"button",22),t._UZ(19,"nb-icon",23),t.qZA()()()()()()}if(2&o){const e=p.$implicit;t.xp6(6),t.hij(" ",e.name," "),t.xp6(6),t.s9C("value",e.cost_pen),t.Q6J("ngModel",e.cost_pen)}}let C=(()=>{class o{constructor(e,i){this.activeModal=e,this.service=i,this.loading=!1,this.isClose="close",this.carrito=[]}ngOnInit(){}closeModal(){this.activeModal.close(this.isClose)}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(a.X4l),t.Y36(f.m))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["art-m-shopping"]],inputs:{carrito:"carrito"},decls:24,vars:2,consts:[[1,"scrollModal",2,"width","900px",3,"nbSpinner"],[1,"d-flex","align-items-center","justify-content-between"],["icon","shopping-cart-outline","status","success"],["nbButton","","outline","","status","basic","size","tiny",3,"click"],["aria-hidden","true"],[1,"row"],[1,"col-md-7"],[1,"col-md-6"],[1,"col-md-6",2,"text-align","right"],["status","primary"],["style","margin-bottom: 5px;",4,"ngFor","ngForOf"],[1,"col-md-5"],[2,"margin-bottom","5px"],[1,"col-md-2","text-center"],["src","https://www.pngall.com/wp-content/uploads/7/Gallery-PNG-Images.png","alt","","height","60px"],[1,"col-md-9"],[1,"col-md-1","text-center"],["status","priamry"],["type","number","nbInput","","fieldSize","small","fullWidth","","placeholder","Costo",3,"value","ngModel","ngModelChange"],["nbPrefix","","nbButton","","size","small","status","danger"],["icon","minus-outline","pack","eva"],["type","text","nbInput","","fullWidth","","fieldSize","small"],["nbSuffix","","nbButton","","size","small","status","success"],["nbPrefix","","icon","plus-outline","pack","eva"]],template:function(i,n){1&i&&(t.TgZ(0,"nb-card",0)(1,"nb-card-header")(2,"div",1)(3,"div"),t._UZ(4,"nb-icon",2),t._uU(5,"MI CARRITO "),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return n.closeModal()}),t.TgZ(7,"span",4),t._uU(8,"\xd7"),t.qZA()()()(),t.TgZ(9,"nb-card-body")(10,"div",5)(11,"div",6)(12,"div",5)(13,"div",7)(14,"strong"),t._uU(15,"CESTA"),t.qZA()(),t.TgZ(16,"div",8)(17,"nb-checkbox",9),t._uU(18,"Todos"),t.qZA()()(),t._UZ(19,"hr"),t.YNc(20,v,20,3,"nb-card",10),t.qZA(),t.TgZ(21,"div",11)(22,"strong"),t._uU(23,"RES\xdaMEN"),t.qZA()()()()()),2&i&&(t.Q6J("nbSpinner",n.loading),t.xp6(20),t.Q6J("ngForOf",n.carrito))},dependencies:[u.sg,r.Fj,r.wV,r.JJ,r.On,a.Asz,a.yKW,a.XWE,a.ndF,a.fMN,a.h8i,a.DPz,a.Q7R,a.jBG,a.t3q,a.yyc,a.NTf]})}return o})();function x(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"button",5),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.changePage(s.value))}),t._uU(2),t.qZA()()}if(2&o){const e=p.$implicit,i=t.oxw();t.xp6(1),t.Q6J("value",e.value)("status",e.value===i.currentPage?"primary":"basic"),t.xp6(1),t.hij(" ",e.label," ")}}let A=(()=>{class o{constructor(){this.currentPage=1,this.changePagePagination=new t.vpe,this.onChange=e=>{},this.onTouch=()=>{}}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setDisabledState(e){}writeValue(e){e&&(this.currentPage=parseInt(e,10))}changePage(e){e&&(this.currentPage=e,this.onTouch(),this.onChange(this.currentPage),this.changePagePagination.emit(e))}createPageArray(e,i=0,n){n=+n;const s=[],c=Math.ceil(n/2),_=e<=c,P=i-c<e,b=!_&&!P;let z=n<i,g=1;for(;g<=i&&g<=n;){let d,Z=this.calculatePageNumber(g,e,n,i);d=z&&(2===g&&(b||P)||g===n-1&&(b||_))?"...":Z,s.push({label:d,value:Z}),g++}return s}calculatePageNumber(e,i,n,s){let c=Math.ceil(n/2);return e===n?s:1===e?e:n<s?s-c<i?s-n+e:c<i?i-c+e:e:e}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-pagination"]],inputs:{paginationOptions:"paginationOptions"},outputs:{changePagePagination:"changePagePagination"},features:[t._Bn([{provide:r.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])],decls:8,vars:5,consts:[[1,"d-flex","flex-row","flex-wrap","gap-1","justify-content-lg-center","align-items-center"],["nbButton","","size","small","hero","",3,"disabled","click"],["icon","arrow-ios-back-outline",3,"status"],[4,"ngFor","ngForOf"],["icon","arrow-ios-forward-outline",3,"status"],["nbButton","","size","small","hero","",3,"value","status","click"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div")(2,"button",1),t.NdJ("click",function(){return n.changePage(null==n.paginationOptions?null:n.paginationOptions.previousPage)}),t._UZ(3,"nb-icon",2),t.qZA()(),t.YNc(4,x,3,3,"div",3),t.TgZ(5,"div")(6,"button",1),t.NdJ("click",function(){return n.changePage(null==n.paginationOptions?null:n.paginationOptions.nextPage)}),t._UZ(7,"nb-icon",4),t.qZA()()()),2&i&&(t.xp6(2),t.Q6J("disabled",!(null!=n.paginationOptions&&n.paginationOptions.previousPage)),t.xp6(1),t.Q6J("status",null!=n.paginationOptions&&n.paginationOptions.previousPage?"primary":"basic"),t.xp6(1),t.Q6J("ngForOf",n.createPageArray(n.currentPage,null==n.paginationOptions?null:n.paginationOptions.pages,6)),t.xp6(2),t.Q6J("disabled",!(null!=n.paginationOptions&&n.paginationOptions.nextPage)),t.xp6(1),t.Q6J("status",null!=n.paginationOptions&&n.paginationOptions.nextPage?"primary":"basic"))},dependencies:[u.sg,a.fMN,a.DPz],encapsulation:2})}return o})();function O(o,p){if(1&o&&(t.TgZ(0,"nb-option",3),t._uU(1),t.qZA()),2&o){const e=p.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let y=(()=>{class o{constructor(){this.currentPerPage=0,this.perPageDefault=0,this.total=0,this.showTotal=!0,this.changePerPage=new t.vpe,this.perpages=[5,10,15,20,25,30,40,80,100,200,500,1e3]}changeSelect(e){this.changePerPage.emit(e)}static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-pagination-per"]],inputs:{currentPerPage:"currentPerPage",perPageDefault:"perPageDefault",total:"total",showTotal:"showTotal"},outputs:{changePerPage:"changePerPage"},decls:6,vars:3,consts:[[1,"float-start"],["nbPrefix","","icon","menu-outline"],["size","tiny",3,"selected","selectedChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"]],template:function(i,n){1&i&&(t.TgZ(0,"nb-form-field",0),t._UZ(1,"nb-icon",1),t.TgZ(2,"nb-select",2),t.NdJ("selectedChange",function(c){return n.changeSelect(c)}),t.TgZ(3,"nb-option",3),t._uU(4,"Todos"),t.qZA(),t.YNc(5,O,2,2,"nb-option",4),t.qZA()()),2&i&&(t.xp6(2),t.Q6J("selected",n.currentPerPage),t.xp6(1),t.Q6J("value",n.total),t.xp6(2),t.Q6J("ngForOf",n.perpages))},dependencies:[u.sg,a.fMN,a.rs,a.q51,a.jBG,a.t3q],encapsulation:2})}return o})();function U(o,p){if(1&o&&(t.TgZ(0,"div",1)(1,"small",2),t._uU(2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.lnq("",null==e.paginationDetailOptions?null:e.paginationDetailOptions.from," - ",null==e.paginationDetailOptions?null:e.paginationDetailOptions.to," de ",null==e.paginationDetailOptions?null:e.paginationDetailOptions.total," registros.")}}let q=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-pagination-detail"]],inputs:{paginationDetailOptions:"paginationDetailOptions"},decls:1,vars:1,consts:[["class","d-flex flex-row justify-content-lg-end",4,"ngIf"],[1,"d-flex","flex-row","justify-content-lg-end"],[1,"caption"]],template:function(i,n){1&i&&t.YNc(0,U,3,3,"div",0),2&i&&t.Q6J("ngIf",n.paginationDetailOptions)},dependencies:[u.O5],encapsulation:2,changeDetection:0})}return o})();function N(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.ALo(11,"currency"),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",17)(16,"button",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.addItem(s))}),t._UZ(17,"nb-icon",5),t._uU(18," Agregar"),t.qZA()()()}if(2&o){const e=p.$implicit,i=p.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.code||e.code_original),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(null!==e.cost_pen?t.xi3(11,6,e.cost_pen," "):t.xi3(12,9,e.cost_pen_ref," ")),t.xp6(4),t.Oqu(null==e?null:e.quantity)}}function J(o,p){if(1&o){const e=t.EpF();t.TgZ(0,"nb-card-footer")(1,"div",19)(2,"div",20)(3,"app-pagination-per",21),t.NdJ("changePerPage",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.changePerPage(n))}),t.qZA()(),t.TgZ(4,"div",20)(5,"app-pagination",22),t.NdJ("changePagePagination",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.changePagePaginations(n))}),t.qZA()(),t.TgZ(6,"div",20),t._UZ(7,"app-pagination-detail",23),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("total",e.paginate.total)("perPageDefault",e.paginate.perPage)("currentPerPage",e.paginate.perPage),t.xp6(2),t.Q6J("formControl",e.page)("paginationOptions",e.paginate),t.xp6(2),t.Q6J("paginationDetailOptions",e.paginate)}}const w=[{path:"",component:(()=>{class o{constructor(e,i,n){this.service=e,this.formBuilder=i,this.nbDialogService=n,this.formHeaders=r.cw,this.products=[],this.paginate="",this.carrito=[]}ngOnInit(){this.fieldReactive(),this.getProducts()}fieldReactive(){this.formHeaders=this.formBuilder.group({search:[""],page:[1],per_page:[20]})}get page(){return this.formHeaders.get("page")}changePerPage(e){this.formHeaders.controls.per_page.setValue(e),this.formHeaders.controls.page.setValue(1),this.getProducts()}changePagePaginations(e){this.formHeaders.controls.page.setValue(e),this.getProducts()}filters(){this.formHeaders.controls.page.setValue(1),this.getProducts()}getProducts(){const i=this.formHeaders.value;this.service.nameParams$(T.b.el_art.settings.products+"/input-output",{size:i.per_page,page:i.page,name_code_filter:i.search}).subscribe(s=>{this.products=s.data||[],console.log(this.products),setTimeout(()=>{this.setPaginate(s)},100)})}setPaginate(e){this.paginate={from:e.pageNum,to:e.pageSize,page:e.pageNum,pages:e.pages,perPage:e.pageSize,nextPage:Number(e.pageNum)<Number(e.pages)?Number(e.pageNum)+1:null,previousPage:Number(e.pageNum)>1?Number(e.pages)-1:null,total:e.total,data:e.data}}addItem(e){this.carrito.push(e)}openShopping(){this.nbDialogService.open(C,{dialogClass:"dialog-limited-height",context:{carrito:this.carrito},closeOnBackdropClick:!1,closeOnEsc:!1}).onClose.subscribe(e=>{"ok"===e&&(this.formHeaders.controls.page.setValue(1),this.getProducts())})}static#t=this.\u0275fac=function(i){return new(i||o)(t.Y36(f.m),t.Y36(r.qu),t.Y36(a.Gln))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["art-products-home"]],decls:41,vars:4,consts:[[1,"row"],[1,"col-md-6"],["icon","save","status","success"],[1,"col-md-6",2,"text-align","right"],["nbButton","","size","medium","status","primary",3,"click"],["icon","shopping-cart-outline"],[2,"padding-top","1px","padding-bottom","1px"],[3,"formGroup"],[1,"col-md-5"],["type","text","nbInput","","fieldSize","small","fullWidth","","formControlName","search","placeholder","Buscar"],[1,"col-md-1"],["nbButton","","fullWidth","","size","small","status","warning",3,"click"],[2,"max-height","70vh"],[1,"teble-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"width","1px"],["nbButton","","size","tiny","fullWidth","","status","success",3,"click"],[1,"row","g-1","row-cols-1","row-cols-lg-3","align-items-center"],[1,"col"],[3,"total","perPageDefault","currentPerPage","changePerPage"],[3,"formControl","paginationOptions","changePagePagination"],[3,"paginationDetailOptions"]],template:function(i,n){1&i&&(t.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1),t._UZ(4,"nb-icon",2),t._uU(5," PRODUCTOS "),t.qZA(),t.TgZ(6,"div",3)(7,"button",4),t.NdJ("click",function(){return n.openShopping()}),t._UZ(8,"nb-icon",5),t._uU(9),t.qZA()()()(),t.TgZ(10,"nb-card-header",6)(11,"form",7)(12,"div",0),t._UZ(13,"div",1),t.TgZ(14,"div",8),t._UZ(15,"input",9),t.qZA(),t.TgZ(16,"div",10)(17,"button",11),t.NdJ("click",function(){return n.filters()}),t._uU(18,"Buscar"),t.qZA()()()()(),t.TgZ(19,"nb-card-body",12)(20,"div",13)(21,"table",14)(22,"thead")(23,"tr")(24,"th"),t._uU(25,"#"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"C\xf3digo"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Nombre"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Descripci\xf3n"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Precio"),t.qZA(),t.TgZ(34,"th"),t._uU(35,"Cantidad"),t.qZA(),t.TgZ(36,"th"),t._uU(37,"OPC."),t.qZA()()(),t.TgZ(38,"tbody"),t.YNc(39,N,19,12,"tr",15),t.qZA()()()(),t.YNc(40,J,8,6,"nb-card-footer",16),t.qZA()),2&i&&(t.xp6(9),t.Oqu(n.carrito.length),t.xp6(2),t.Q6J("formGroup",n.formHeaders),t.xp6(28),t.Q6J("ngForOf",n.products),t.xp6(1),t.Q6J("ngIf",(null==n.products?null:n.products.length)>0))},dependencies:[A,y,q,u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.oH,r.sg,r.u,a.Asz,a.yKW,a.XWE,a.ndF,a.fMN,a.h8i,a.DPz,u.H9]})}return o})()}];let M=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(w),h.Bz]})}return o})();var D=l(3053);const F=[u.ez,r.u5,r.UX],H=[a.zyh,a.KdK,a.nKr,a.T2N,a.uuI,a.j7H.forChild(),a.V7y,a.MfT];let S=(()=>{class o{static#t=this.\u0275fac=function(i){return new(i||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[M,D.R,F,H]})}return o})()}}]);